(function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],m=0,d=[];m<s.length;m++)o=s[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},i={app:0},n=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/xzdj-b/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"076f":function(t,e,a){"use strict";a("2055")},"1db0":function(t,e,a){},2027:function(t,e,a){"use strict";a("1db0")},2055:function(t,e,a){},2179:function(t,e,a){"use strict";a("abb5")},"219c":function(t,e,a){"use strict";a("ee86")},3848:function(t,e,a){},"3caa":function(t,e,a){},"43f2":function(t,e,a){"use strict";a("ac7e")},"443a":function(t,e,a){},"47cf":function(t,e,a){"use strict";a("f611")},"493d":function(t,e,a){},5092:function(t,e,a){"use strict";a("7473")},"514d":function(t,e,a){},5306:function(t,e,a){},"55cc":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],o=a("d148"),s=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"});s.auth({persistence:"session"}).anonymousAuthProvider().signIn().then((function(){})).catch((function(t){console.log(t)}));var l={name:"app",components:{},data:function(){return{}},methods:{}},c=l,u=(a("034f"),a("2877")),m=Object(u["a"])(c,i,n,!1,null,null,null),d=m.exports,f=(a("99af"),a("8c4f")),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Layout")],1)},h=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-container"},[a("div",{staticClass:"left"},[t._t("left",(function(){return[a("Menu",{staticClass:"heander-container"})]}))],2),a("div",{key:t.key,staticClass:"right"},[a("Header"),a("router-view")],1)])},b=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-container"},[a("el-menu",{key:t.key,staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":t.activePath,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[t._l(t.routes,(function(e){return[e.meta.ishidden?t._e():a("el-submenu",{key:e.name,attrs:{index:e.meta.title}},[a("template",{slot:"title"},[a("i",{class:"el-icon-"+e.meta.icon}),a("span",[t._v(t._s(e.meta.title))])]),t._l(e.children,(function(e){return[e.meta.ishidden?t._e():a("el-menu-item",{key:e.name,attrs:{route:{name:e.name},index:e.meta.title}},[a("i",{class:"el-icon-"+e.meta.icon}),t._v(t._s(e.meta.title)+" ")])]}))],2)]}))],2)],1)},y=[],w={data:function(){return{key:(new Date).getTime()}},computed:{activePath:function(){return this.$route.meta.title},routes:function(){return this.$store.state.menuRoutes}},mounted:function(){this.key=(new Date).getTime()}},D=w,_=(a("65bc"),Object(u["a"])(D,v,y,!1,null,"07bf8e56",null)),x=_.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.path,(function(e,r){return a("el-breadcrumb-item",{key:r},[t._v(t._s(e.meta.title))])})),1),a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[t._v(" 欢迎"+t._s(t.user?t.user:"")),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("router-link",{staticClass:"login",attrs:{to:"/login"},nativeOn:{click:function(e){return t.handleLoginOut.apply(null,arguments)}}},[t._v("退出登录")])],1)],1)],1)],1)},S=[],$=a("1da1"),C=(a("96cf"),{data:function(){return{}},computed:{path:function(){return this.$route.matched},user:function(){return this.$store.state.user}},created:function(){},methods:{handleLoginOut:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("退出"),e.next=3,t.$store.dispatch("loginOut");case 3:case"end":return e.stop()}}),e)})))()}}}),q=C,L=(a("c164"),a("dbb7"),Object(u["a"])(q,k,S,!1,null,"f8307b50",null)),T=L.exports,O={data:function(){return{key:(new Date).getTime()}},components:{Menu:x,Header:T},watch:{$route:function(){this.key=(new Date).getTime()}}},j=O,F=(a("6a75"),Object(u["a"])(j,g,b,!1,null,"2bffe252",null)),N=F.exports,z={components:{Layout:N}},E=z,P=Object(u["a"])(E,p,h,!1,null,null,null),A=P.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"80px",inline:!1,size:"normal","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit.apply(null,arguments)}}},[t._v("登录")])],1)],1)],1)},V=[];a("b0c0");function I(t){return R.apply(this,arguments)}function R(){return R=Object($["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem("user",e);case 1:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function M(){return localStorage.getItem("user")}function U(){localStorage.removeItem("user")}var H={data:function(){return{form:{name:"",password:""},rules:{name:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},methods:{onSubmit:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("提交"),t.$refs.form.validate((function(e){e?"liushuaiyang"!==t.form.name&&"admin_one"!==t.form.name&&"admin_two"!==t.form.name||"xzdjyyds"!==t.form.password?t.$message({message:"账号或密码错误",type:"error",duration:3e3}):(t.$message({message:"登录成功",type:"success",duration:3e3}),I(t.form.name),t.$store.commit("setUser",t.form.name),t.$router.push("/club/list")):t.$message({message:"信息未填写完整",type:"error",duration:3e3})}));case 2:case"end":return e.stop()}}),e)})))()}}},J=H,Y=(a("72bb"),Object(u["a"])(J,B,V,!1,null,"451b90a8",null)),G=Y.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"club-container"},[a("Layout")],1)},Q=[],W={components:{Layout:N}},X=W,Z=(a("2179"),Object(u["a"])(X,K,Q,!1,null,"3bfe13d6",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-container"},[a("Layout")],1)},at=[],rt={components:{Layout:N}},it=rt,nt=(a("d965"),Object(u["a"])(it,et,at,!1,null,"a77db3f6",null)),ot=nt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"club-list-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.searchSubmit}},[t._v("搜索")]),t.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.searchBack}},[t._v("返回")]):t._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.toClubAddPage}},[t._v("新增社员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:0==t.tableData.length&&t.isLoading,expression:"tableData.length == 0 && isLoading"}],ref:"table",staticClass:"club-table"},[a("el-table",{attrs:{data:t.tableData,"highlight-current-row":"",stripe:"",border:""}},[t._l(t.columns,(function(t){return a("el-table-column",{key:t.id,attrs:{prop:t.id,label:t.label,align:"center"}})})),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2)],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{background:"",layout:" total , prev, pager, next","page-size":20,total:t.totalData.length,"current-page":t.currentPage,"current-change":t.currentChange},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),a("el-dialog",{attrs:{title:"编辑",center:"",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("EditForm",{attrs:{formData:t.editFormData},on:{formSubmit:t.editFormSubmit}})],1)],1)},lt=[],ct=a("5530"),ut=(a("4de4"),a("07ac"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-form-container"},[a("Form",{attrs:{form:t.formData},on:{formSubmit:t.formSubmit}})],1)}),mt=[],dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}},t._l(t.gradeOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:t.form.faculty,callback:function(e){t.$set(t.form,"faculty",e)},expression:"form.faculty"}},t._l(t.facultyOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},ft=[],pt={props:{form:Object},data:function(){var t=function(t,e,a){11!==e.length?a(new Error("手机号格式不正确")):a()};return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},gradeOptions:["21级","20级","19级"],facultyOptions:["信息系","财经系","医疗系","人文系","建工系","艺术系","外国语","机电系","航空系","园林系","五年制部"]}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(e,a){console.log(e,a),e?(t.form.id=t.form.name+t.form.mobile,t.form.fac=[t.form.grade,t.form.faculty],console.log(t.form),t.$emit("formSubmit",t.form)):t.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},ht=pt,gt=(a("b84d"),Object(u["a"])(ht,dt,ft,!1,null,"564bcb1b",null)),bt=gt.exports,vt={props:{formData:Object},components:{Form:bt},methods:{formSubmit:function(t){this.$emit("formSubmit",t)}}},yt=vt,wt=(a("2027"),Object(u["a"])(yt,ut,mt,!1,null,"5649a19d",null)),Dt=wt.exports,_t=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),xt=_t.database(),kt={components:{EditForm:Dt},data:function(){return{isLoading:!0,searchValue:"",searchBackShow:!1,columns:[{label:"姓名",id:"name"},{label:"年级",id:"grade"},{label:"院系",id:"faculty"},{label:"班级",id:"class"},{label:"手机号",id:"mobile"}],totalData:[],currentPage:1,dialogVisible:!1,editFormData:[]}},computed:{tableData:function(){var t=this;return this.totalData.filter((function(e,a){return a>=20*(t.currentPage-1)&&a<20*t.currentPage}))}},watch:{currentPage:function(){this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.isLoading=!0,this.getDatabase())}},methods:{searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.isLoading=!0,this.getDatabase()},searchSubmit:function(){var t=this;this.searchBackShow=!0,this.totalData=this.totalData.filter((function(e){var a=Object.values(e).filter((function(e){return e.indexOf(t.searchValue)>=0}));return a.length>0})),0==this.totalData.length&&(this.isLoading=!1)},handleDelete:function(t,e){var a=this;return Object($["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log(t,e),a.$confirm("是否删除姓名为".concat(e.name,"的学生？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.totalData=a.totalData.filter((function(t){return t.id!==e.id})),console.log(a.totalData),a.updateDatabase(),a.$message({type:"success",message:"删除成功!"});case 4:case"end":return t.stop()}}),t)})))).catch((function(){a.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},editFormSubmit:function(t){this.dialogVisible=!1,console.log(t),this.totalData=this.totalData.map((function(e){return e.id===t.id&&(e=t),e})),this.updateDatabase()},handleEdit:function(t,e){console.log(t,e),this.dialogVisible=!0,this.editFormData=Object(ct["a"])({},e)},toClubAddPage:function(){this.$router.push({name:"ClubAdd"})},currentChange:function(t){console.log(this.currentPage),this.currentPage=t},updateDatabase:function(){xt.collection("community").doc("clubList").update({data:this.totalData}).then((function(t){console.log(t)}))},getDatabase:function(){var t=this;xt.collection("community").doc("clubList").get().then((function(e){var a=e.data[0].data;console.log(a);var r=a.map((function(t){return t.grade=t.fac[0],t.faculty=t.fac[1],t}));t.totalData=r,console.log(r)}))}},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDatabase();case 1:case"end":return e.stop()}}),e)})))()}},St=kt,$t=(a("076f"),Object(u["a"])(St,st,lt,!1,null,"1e7bad0f",null)),Ct=$t.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"club-add-container"},[a("div",{staticClass:"content"},[a("Form",{attrs:{form:t.formAddData},on:{formSubmit:t.formAddSubmit}})],1)])},Lt=[],Tt=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),Ot=Tt.database(),jt=Ot.command,Ft={components:{Form:bt},data:function(){return{formAddData:{name:"",id:"",grade:"",faculty:"",class:"",mobile:""}}},methods:{formAddSubmit:function(t){var e=this;console.log(t),Ot.collection("community").doc("clubList").update({data:jt.push(t)}).then((function(t){console.log(t),e.$message({message:"新增成功",type:"success",showClose:!0,duration:3e3}),e.$router.push({name:"ClubList"})})).catch((function(t){console.log(t)}))}}},Nt=Ft,zt=(a("43f2"),Object(u["a"])(Nt,qt,Lt,!1,null,"ccd72900",null)),Et=zt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-list-container"},[a("el-tabs",{staticClass:"tabs"},[a("el-tab-pane",{attrs:{label:"正在进行"}},[a("div",{staticClass:"tabs-list"},[t._l(t.activityList,(function(e,r){return[t.nowTime>e.startTime&&t.nowTime<e.endTime?a("el-card",{key:"now"+e.id,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v(t._s(e.title))]),a("el-button",{staticStyle:{float:"right",margin:"10px 0 0 20px",padding:"0px",color:"#f00"},attrs:{"data-id":e.id,"data-index":r,type:"text",size:"default"},on:{click:t.activityDelete}},[t._v("删除")]),a("el-button",{staticStyle:{float:"right",margin:"10px 0 0 20px",padding:"0px",color:"green"},attrs:{"data-id":e.id,"data-index":r,type:"text",size:"default"},on:{click:t.activityEdit}},[t._v("编辑")]),a("el-button",{staticStyle:{float:"right","margin-top":"10px",padding:"0px"},attrs:{type:"text","data-id":e.id,"data-index":r},on:{click:t.showDrawerChange}},[t._v(t._s("team"===e.regType?"查看报名队伍":"查看报名人员"))])],1),a("div",{staticClass:"text item"},[a("div",[t._v(t._s(e.desc))]),"team"===e.regType?a("div",{staticClass:"gray"},[t._v("总名额："+t._s(e.total/e.teamNum)+"支")]):a("div",{staticClass:"gray"},[t._v("总名额："+t._s(e.total)+"人")]),"team"===e.regType?a("div",{staticClass:"gray"},[t._v(" 剩余队伍名额： "),a("span",[t._v(t._s(e.total/e.teamNum-e.teamList.length)+" ")]),t._v("支 ")]):a("div",{staticClass:"gray"},[t._v(" 剩余名额： "),a("span",[t._v(t._s(e.total-e.regList.length)+" ")]),t._v("人 ")]),a("div",{staticClass:"gray"},[t._v("报名截止时间："+t._s(e.overTime))])])]):t._e()]})),t.isShowActiveList?a("el-empty",{staticStyle:{margin:"0 auto"},attrs:{"image-size":200}}):t._e()],2)]),a("el-tab-pane",{attrs:{label:"已结束"}},[a("div",{staticClass:"tabs-list"},[t._l(t.activityList,(function(e,r){return[t.nowTime>e.endTime?a("el-card",{key:"end"+e.id,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v(t._s(e.title))]),a("el-button",{staticStyle:{float:"right",padding:"3px 0 3px 20px",color:"#f00"},attrs:{"data-id":e.id,"data-index":r,type:"text",size:"default"},on:{click:t.activityDelete}},[t._v("删除")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text","data-id":e.id,"data-index":r},on:{click:t.showDrawerChange}},[t._v(t._s("team"===e.regType?"查看报名队伍":"查看报名人员"))])],1),a("div",{staticClass:"text item"},[a("div",[t._v(t._s(e.desc))]),a("div",{staticClass:"gray"},[t._v("总名额："+t._s(e.total)+"人")]),"team"===e.regType?a("div",{staticClass:"gray"},[t._v(" 参加队伍： "),a("span",[t._v(t._s(e.teamList.length)+" ")]),t._v("支 ")]):a("div",{staticClass:"gray"},[t._v(" 参加人数： "),a("span",[t._v(t._s(e.regList.length)+" ")]),t._v("人 ")]),a("div",{staticClass:"gray"},[t._v("活动截止日期："+t._s(e.overTime))])])]):t._e()]})),t.isShowOverList?a("el-empty",{staticStyle:{margin:"0 auto"},attrs:{"image-size":200}}):t._e()],2)])],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:t.isShowActivityDrawer,direction:"rtl",size:"70%"},on:{"update:visible":function(e){t.isShowActivityDrawer=e}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[t._v("修改活动信息")]),a("activityForm",{key:"edit",attrs:{formData:t.acitvityEditForm,type:"edit"},on:{editActivitySubmit:t.editActivitySubmit}})],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:t.isShowDrawer,direction:"rtl",size:"50%"},on:{"update:visible":function(e){t.isShowDrawer=e}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[t._v("报名人员")]),a("Table",{attrs:{totalData:t.detailList},on:{detailAdd:t.detailAdd,detailDelete:t.detailDelete,showEditForm:t.showEditForm,search:t.onSearch,getNewData:t.getDatabase}}),a("el-drawer",{attrs:{"append-to-body":"",visible:t.isShowInnerDrawer1,direction:"rtl",size:"30%"},on:{"update:visible":function(e){t.isShowInnerDrawer1=e}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[t._v("修改人员信息")]),a("EditForm",{key:"personal",attrs:{form:t.editFormData,facultyOptions:t.FacultyOptions},on:{formSubmit:t.editFormSubmit}})],1),a("el-drawer",{attrs:{"append-to-body":"",visible:t.isShowInnerDrawer2,direction:"rtl",size:"30%"},on:{"update:visible":function(e){t.isShowInnerDrawer2=e}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[t._v("新增参赛人员")]),a("AddForm",{key:"personal",attrs:{form:t.addFormData,facultyOptions:t.FacultyOptions},on:{formSubmit:t.AddFormSubmit}})],1)],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:t.isShowTeamDrawer,direction:"rtl",size:"60%"},on:{"update:visible":function(e){t.isShowTeamDrawer=e}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[t._v("报名队伍")]),a("TeamTable",{attrs:{totalData:t.detailList,teamNum:t.teamNum},on:{detailAdd:t.detailAdd,detailDelete:t.detailDelete,showEditForm:t.showEditForm,search:t.onSearch,getNewData:t.getDatabase}}),a("el-drawer",{attrs:{"append-to-body":"",visible:t.isShowInnerTeamDrawer1,direction:"rtl",size:"30%"},on:{"update:visible":function(e){t.isShowInnerTeamDrawer1=e}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[t._v("修改人员信息")]),a("TeamEditForm",{key:"team",attrs:{form:t.editFormData},on:{formSubmit:t.editFormSubmit}})],1),a("el-drawer",{attrs:{"append-to-body":"",visible:t.isShowInnerTeamDrawer2,direction:"rtl",size:"30%"},on:{"update:visible":function(e){t.isShowInnerTeamDrawer2=e}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[t._v("新增参赛人员")]),a("TeamAddForm",{key:"team",attrs:{form:t.addFormData},on:{formSubmit:t.AddFormSubmit}})],1)],1)],1)},At=[],Bt=a("ade3"),Vt=(a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.searchSubmit}},[t._v("搜索")]),t.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.searchBack}},[t._v("返回")]):t._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.detailAdd}},[t._v("新增人员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:t.data,border:"","highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"grade",label:"年级",align:"center"}}),a("el-table-column",{attrs:{prop:"faculty",label:"院系",align:"center"}}),a("el-table-column",{attrs:{prop:"class",label:"班级",align:"center"}}),a("el-table-column",{attrs:{prop:"qq",label:"qq",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:t.totalData.length,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)}),It=[],Rt=(a("d3b7"),a("25f0"),{props:{totalData:Array,toPage:String},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1}},computed:{data:function(){var t=this;return this.totalData.filter((function(e,a){return a>=20*(t.currentPage-1)&&a<20*t.currentPage}))}},watch:{currentPage:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))}},methods:{handleDelete:function(t,e){var a=this;this.$confirm("是否删除名字为".concat(e.name,"的成员？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",e)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleEdit:function(t,e){console.log(t,e);var a=Object(ct["a"])({},e);this.$emit("showEditForm",a)},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var t=this;this.searchBackShow=!0;var e=this.totalData.filter((function(e){var a=Object.values(e).filter((function(e){return e.toString().indexOf(t.searchValue)>=0}));return a.length>0}));this.$emit("search",e)},detailAdd:function(){this.$emit("detailAdd")}}}),Mt=Rt,Ut=(a("6cdc"),Object(u["a"])(Mt,Vt,It,!1,null,"ecd8c0c2",null)),Ht=Ut.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.searchSubmit}},[t._v("搜索")]),t.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.searchBack}},[t._v("返回")]):t._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.detailAdd}},[t._v("新增人员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:t.data,border:"","highlight-current-row":"",stripe:""}},[t._l(t.tableList,(function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.value,label:t.label,align:"center"}})})),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:t.totalData.length,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},Yt=[],Gt=(a("a9e3"),{props:{totalData:Array,teamNum:Number},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1,tableList:[{value:"captain",label:"队长"},{value:"teamNumber1",label:"队员1"},{value:"teamNumber2",label:"队员2"},{value:"teamNumber3",label:"队员3"},{value:"teamNumber4",label:"队员4"},{value:"qq",label:"队长联系qq"}]}},computed:{data:function(){var t=this;return this.totalData.filter((function(e,a){return a>=20*(t.currentPage-1)&&a<20*t.currentPage}))}},watch:{currentPage:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))},teamNum:function(){for(var t=[],e=0;e<this.teamNum-1;e++)t.push({value:"teamNumber".concat(e+1),label:"队员".concat(e+1)});this.tableList=[{value:"captain",label:"队长"}].concat(t,[{value:"qq",label:"队长联系qq"}]),console.log(this.teamNum,this.tableList)}},methods:{handleDelete:function(t,e){var a=this;this.$confirm("是否删除队长为".concat(e.captain,"的成员？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",e)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleEdit:function(t,e){console.log(t,e);var a=Object(ct["a"])({},e);this.$emit("showEditForm",a)},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var t=this;this.searchBackShow=!0;var e=this.totalData.filter((function(e){var a=Object.values(e).filter((function(e){return e.toString().indexOf(t.searchValue)>=0}));return a.length>0}));this.$emit("search",e)},detailAdd:function(){this.$emit("detailAdd")}}}),Kt=Gt,Qt=(a("219c"),Object(u["a"])(Kt,Jt,Yt,!1,null,"39005cd6",null)),Wt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"qq",prop:"qq"}},[a("el-input",{model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}},t._l(t.gradeOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:t.form.faculty,callback:function(e){t.$set(t.form,"faculty",e)},expression:"form.faculty"}},t._l(t.facultyOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},Zt=[],te={props:{form:Object,facultyOptions:Array},data:function(){var t=function(t,e,a){10!==e.length?a(new Error("手机号格式不正确")):a()};return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},qq:[{required:!0,message:"请输入qq",trigger:"blur"},{validator:t,trigger:"blur"}]},gradeOptions:["21级","20级","19级"]}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(e,a){console.log(e,a),e?(t.form.id=t.form.name+t.form.qq,t.form.fac=[t.form.grade,t.form.faculty],console.log(t.form),t.$emit("formSubmit",t.form)):t.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},ee=te,ae=(a("fdbe"),Object(u["a"])(ee,Xt,Zt,!1,null,"62817367",null)),re=ae.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"100px"}},[t._l(t.formList,(function(e){return a("el-form-item",{key:e.name,attrs:{label:e.label,prop:e.name}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form[e.name],callback:function(a){t.$set(t.form,e.name,a)},expression:"form[item.name]"}})],1)})),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],2)],1)},ne=[],oe={props:{form:Object},data:function(){return{formList:[{name:"captain",label:"队长"},{name:"teamNumber1",label:"队员1"},{name:"teamNumber2",label:"队员2"},{name:"teamNumber3",label:"队员3"},{name:"teamNumber4",label:"队员4"},{name:"qq",label:"队长联系qq"}],rules:{captain:{required:!0,message:"请输入队长信息",trigger:"blur"},teamNumber1:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber2:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber3:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber4:{required:!0,message:"请输入人员信息",trigger:"blur"},qq:{required:!0,message:"请输入qq",trigger:"blur"}}}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(e,a){console.log(e,a),e?(t.form.id=t.form.acptain+t.form.qq,console.log(t.form),t.$emit("formSubmit",t.form)):t.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},se=oe,le=(a("47cf"),Object(u["a"])(se,ie,ne,!1,null,"a0dfa848",null)),ce=le.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"qq",prop:"qq"}},[a("el-input",{model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:t.form.grade,callback:function(e){t.$set(t.form,"grade",e)},expression:"form.grade"}},t._l(t.gradeOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:t.form.faculty,callback:function(e){t.$set(t.form,"faculty",e)},expression:"form.faculty"}},t._l(t.facultyOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],1)],1)},me=[],de={props:{form:Object,facultyOptions:Array},data:function(){return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},qq:[{required:!0,message:"请输入手机号",trigger:"blur"}]},gradeOptions:["21级","20级","19级"]}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(e,a){console.log(e,a),e?(t.form.id=t.form.name+t.form.qq,t.form.fac=[t.form.grade,t.form.faculty],console.log(t.form),t.$emit("formSubmit",t.form)):t.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},fe=de,pe=(a("d92e"),Object(u["a"])(fe,ue,me,!1,null,"67ab0e2e",null)),he=pe.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rules,model:t.formData,"label-width":"100px",inline:!1,size:"normal"}},[a("div",{staticClass:"wrap"},[a("div",[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入活动标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"请输入活动描述"},model:{value:t.formData.desc,callback:function(e){t.$set(t.formData,"desc",e)},expression:"formData.desc"}})],1),a("el-form-item",{attrs:{label:"总人数",prop:"total"}},[a("el-input",{attrs:{placeholder:"请输入活动参加总人数"},model:{value:t.formData.total,callback:function(e){t.$set(t.formData,"total",t._n(e))},expression:"formData.total"}})],1),a("el-form-item",{attrs:{label:"报名方式",prop:"regType"}},[a("el-select",{attrs:{placeholder:"请选择报名方式"},model:{value:t.formData.regType,callback:function(e){t.$set(t.formData,"regType",e)},expression:"formData.regType"}},t._l(t.regTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"队伍人数",prop:"teamNum"}},[a("el-input",{attrs:{placeholder:"请输入队伍人数"},model:{value:t.formData.teamNum,callback:function(e){t.$set(t.formData,"teamNum",t._n(e))},expression:"formData.teamNum"}})],1)],1),a("div",[a("el-form-item",{attrs:{label:"日期",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}})],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择可以参加活动的院系"},model:{value:t.formData.faculty,callback:function(e){t.$set(t.formData,"faculty",e)},expression:"formData.faculty"}},t._l(t.facultyOptions,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"比赛群号",prop:"qunNum"}},[a("el-input",{attrs:{placeholder:"请输入活动的比赛群号"},model:{value:t.formData.qunNum,callback:function(e){t.$set(t.formData,"qunNum",e)},expression:"formData.qunNum"}})],1),a("el-form-item",{attrs:{label:"群二维码",prop:"qrcode"}},[a("el-upload",{attrs:{action:"#","list-type":"picture-card","on-change":t.qrcodeUrlChange,"auto-upload":!1,"file-list":t.fileList},scopedSlots:t._u([{key:"file",fn:function(e){var r=e.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:r.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(r)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),t.disabled?t._e():a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(r)}}},[a("i",{staticClass:"el-icon-delete"})])])])}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",height:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},be=[],ve=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),ye={props:{formData:Object,type:String},data:function(){return{formItems:[{label:"标题",prop:"title"},{label:"描述",prop:"desc"},{label:"总人数",prop:"total"},{label:"开始时间",prop:"startTime"},{label:"结束时间",prop:"endTime"},{label:"院系",prop:"faculty"},{label:"比赛群号",prop:"qunNum"},{label:"群二维码",prop:"qrcode"}],rules:{title:{required:!0,message:"请输入标题",trigger:"blur"},desc:{required:!0,message:"描述不能为空",trigger:"blur"},total:{required:!0,message:"请输入总人数",trigger:"blur"},regType:{required:!0,message:"请选择报名方式",trigger:"blur"},date:{required:!0,message:"请选择日期",trigger:"blur"},faculty:{required:!0,message:"请选择院系",trigger:"blur"},qunNum:{required:!0,message:"请输入比赛群号",trigger:"blur"},qrcode:{required:!0,message:"请上传比赛群的二维码",trigger:"blur"}},facultyOptions:["信息系","财经系","医疗系","人文系","建工系","艺术系","外国语","机电系","航空系","园林系","五年制部"],regTypeOptions:[{value:"team",label:"团队"},{value:"personal",label:"个人"}],fileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1}},watch:{dialogImageUrl:function(){console.log(this.dialogImageUrl)}},methods:{qrcodeUrlChange:function(t,e){var a=this;console.log(t,e),ve.uploadFile({cloudPath:"社团/activity/".concat(this.formData.title,"-").concat(t.name),filePath:t.raw}).then((function(t){a.$message({message:"图片上传成功",type:"success",showClose:!0,duration:3e3}),a.formData.qrcode=t.fileID,console.log(t)}))},handleRemove:function(t){console.log(t),this.fileList=this.fileList.filter((function(e){return t==e}))},handlePictureCardPreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},onSubmit:function(){var t=this;console.log(this.formData),this.formData.startTime=this.formData.date[0],this.formData.endTime=this.formData.date[1],console.log(this.formData.startTime,this.formData.endTime),this.type||(this.formData.regList=[],this.formData.teamList=[]),this.$refs.form.validate((function(e,a){if(e)console.log(e),t.type?t.$emit("editActivitySubmit",t.formData):t.$emit("formSubmit",t.formData);else{var r=Object.values(a)[0][0].message;t.$message({message:r,type:"error",showClose:!0,duration:3e3})}}))}}},we=ye,De=(a("b6b2"),a("ce36"),Object(u["a"])(we,ge,be,!1,null,"7ae83a12",null)),_e=De.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"100px"}},[t._l(t.formList,(function(e){return a("el-form-item",{key:e.name,attrs:{label:e.label,prop:e.name}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form[e.name],callback:function(a){t.$set(t.form,e.name,a)},expression:"form[item.name]"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")])],1)],2)],1)},ke=[],Se={props:{form:Object},data:function(){return{formList:[{name:"captain",label:"队长"},{name:"teamNumber1",label:"队员1"},{name:"teamNumber2",label:"队员2"},{name:"teamNumber3",label:"队员3"},{name:"teamNumber4",label:"队员4"},{name:"qq",label:"队长联系qq"}],rules:{captain:{required:!0,message:"请输入队长信息",trigger:"blur"},teamNumber1:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber2:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber3:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber4:{required:!0,message:"请输入人员信息",trigger:"blur"},qq:{required:!0,message:"请输入qq",trigger:"blur"}}}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(e,a){console.log(e,a),e?(t.form.id=t.form.captain+t.form.qq,console.log(t.form),t.$emit("formSubmit",t.form)):t.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},$e=Se,Ce=(a("6faa"),Object(u["a"])($e,xe,ke,!1,null,"3c89d9d0",null)),qe=Ce.exports;function Le(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return"".concat(a,"-").concat(r,"-").concat(i)}function Te(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),n=e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return"".concat(a,"-").concat(r,"-").concat(i," - ").concat(n,":").concat(o,":").concat(s)}var Oe=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),je=Oe.database(),Fe=je.command,Ne={components:{Table:Ht,TeamTable:Wt,EditForm:re,TeamEditForm:ce,AddForm:he,TeamAddForm:qe,activityForm:_e},data:function(){return{isShowActiveList:!0,isShowOverList:!0,activityList:[],acitvityEditForm:{},teamNum:0,nowTime:new Date,isShowDrawer:!1,isShowActivityDrawer:!1,isShowTeamDrawer:!1,isShowInnerDrawer1:!1,isShowInnerDrawer2:!1,isShowInnerTeamDrawer1:!1,isShowInnerTeamDrawer2:!1,detailList:[],id:"",editFormData:{},FacultyOptions:[],addFormData:{name:"",qq:"",grade:"",faculty:"",fac:[],id:""}}},mounted:function(){this.getDatabase()},methods:{onSearch:function(t){this.detailList=t},AddFormSubmit:function(t){var e=this;console.log(t);var a="team"===this.type?"teamList":"regList";je.collection("community").doc("activityList").update(Object(Bt["a"])({},"list.".concat(this.index,".").concat(a),Fe.push(t))).then((function(t){e.getDatabase(),e.$message({message:"新增成功",type:"success",showClose:!0,duration:3e3}),"team"!==e.type?(e.isShowInnerDrawer2=!1,console.log(t)):e.isShowInnerTeamDrawer2=!1}))},detailAdd:function(){"team"!==this.type?this.isShowInnerDrawer2=!0:this.isShowInnerTeamDrawer2=!0},detailDelete:function(t){var e=this;console.log(this.id);var a=this.detailList.filter((function(e){return e.id!==t.id})),r="team"===this.type?"teamList":"regList";console.log(r,a),je.collection("community").doc("activityList").update(Object(Bt["a"])({},"list.".concat(this.index,".").concat(r),a)).then((function(t){e.getDatabase(),e.$message({message:"删除成功",type:"success",showClose:!0,duration:3e3}),console.log(t)})).catch((function(t){e.$message({message:"删除失败,错误信息：".concat(t),type:"error",showClose:!0,duration:3e3}),"team"!==e.type?e.isShowInnerDrawer2=!1:e.isShowInnerTeamDrawer2=!1}))},editFormSubmit:function(t){var e=this,a=0;this.detailList.forEach((function(e,r){e.id==t.id&&(a=r)}));var r="team"===this.type?"teamList":"regList";je.collection("community").doc("activityList").update(Object(Bt["a"])({},"list.".concat(this.index,".").concat(r,".").concat(a),t)).then((function(t){e.getDatabase(),e.$message({message:"修改成功",type:"success",showClose:!0,duration:3e3}),"team"!==e.type?(e.isShowInnerDrawer1=!1,console.log(t)):e.isShowInnerTeamDrawer1=!1}))},showEditForm:function(t){"team"===this.type?this.isShowInnerTeamDrawer1=!0:this.isShowInnerDrawer1=!0,this.editFormData=t},showDrawerChange:function(t){var e=this;console.log(t),this.id=t.path[1].dataset.id,this.index=t.path[1].dataset.index,console.log(this.index),this.activityList.forEach((function(t,a){t.id==e.id&&(e.index=a,e.type=t.regType)})),this.getDatabase(),"team"!==this.type?this.isShowDrawer=!0:this.isShowTeamDrawer=!0},activityDelete:function(t){var e=this;this.id=t.path[1].dataset.id,this.index=t.path[1].dataset.index,console.log(this.index),this.$confirm("确定要删除该活动吗？此操作不可逆！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.activityList.filter((function(t){return t.id!==e.id}));console.log(t);var a=t.map((function(t){return t.startTime=Le(t.startTime),t.endTime=Le(t.endTime),t}));je.collection("community").doc("activityList").update(Object(Bt["a"])({},"list",a)).then((function(t){console.log(t),e.getDatabase()}))})).catch((function(){}))},activityEdit:function(t){console.log("修改活动信息");var e=t.path[1].dataset.id,a=this.activityList.filter((function(t){return t.id==e}));this.acitvityEditForm=Object(ct["a"])({},a[0]),this.isShowActivityDrawer=!0},editActivitySubmit:function(t){var e=this;console.log(t);var a=0;this.detailList.forEach((function(e,r){e.id==t.id&&(a=r)})),je.collection("community").doc("activityList").update(Object(Bt["a"])({},"list.".concat(a),t)).then((function(t){e.getDatabase(),e.$message({message:"修改成功",type:"success",showClose:!0,duration:3e3}),e.getDatabase(),e.isShowActivityDrawer=!1,console.log(t)}))},getDatabase:function(){var t=this;je.collection("community").doc("activityList").get().then((function(e){if(t.isShowDrawer||t.isShowTeamDrawer){var a=e.data[0].list.filter((function(e){return e.id==t.id}));return console.log(a),void("team"===t.type?(t.detailList=a[0].teamList,t.teamNum=a[0].teamNum):(t.FacultyOptions=a[0].faculty,t.detailList=a[0].regList.map((function(t){return Object(ct["a"])(Object(ct["a"])({},t),{},{grade:t.fac[0],faculty:t.fac[1]})}))))}console.log(e.data[0].list);var r=e.data[0].list.map((function(e){return e.overTime=e.endTime,e.startTime=new Date(e.startTime).getTime(),e.endTime=new Date(e.endTime).getTime(),e.startTime<t.nowTime&&e.endTime>t.nowTime&&(t.isShowActiveList=!1),e.endTime<t.nowTime&&(t.isShowOverList=!1),e}));console.log(r),t.activityList=r,console.log(t.activityList)}))}}},ze=Ne,Ee=(a("a604"),a("e97b"),Object(u["a"])(ze,Pt,At,!1,null,"4f9d89c8",null)),Pe=Ee.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"activity-add-container"},[a("Form",{attrs:{formData:t.formData},on:{formSubmit:t.formSubmit}})],1)},Be=[],Ve=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),Ie=Ve.database(),Re=Ie.command,Me={components:{Form:_e},data:function(){return{formData:{title:"",desc:"",total:"",regType:"",teamList:[],teamNum:"",date:"",startTime:"",endTime:"",faculty:"",qunNum:"",qrcode:""}}},methods:{formSubmit:function(t){var e=this;console.log(t),t.id=t.title+(new Date).getTime(),Ie.collection("community").doc("activityList").update({list:Re.unshift(t)}).then((function(){e.$message({message:"活动添加成功",type:"success",showClose:!0,duration:3e3}),e.$router.push({name:"ActivityList"})}))}}},Ue=Me,He=(a("8efd"),Object(u["a"])(Ue,Ae,Be,!1,null,"5a141078",null)),Je=He.exports,Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-list-container"},[a("Table",{attrs:{totalData:t.messageList},on:{detailDelete:t.messageDelete,search:t.onSearch,getNewData:t.getMessageList}})],1)},Ge=[],Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.searchSubmit}},[t._v("搜索")]),t.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.searchBack}},[t._v("返回")]):t._e()],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:t.data,border:"","highlight-current-row":"",stripe:"","row-key":"time","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"nickName",label:"昵称",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}}),a("el-table-column",{attrs:{prop:"time",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"likeNum",label:"获赞数",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:t.totalData.length,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},Qe=[],We={props:{totalData:Array,toPage:String},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1}},computed:{data:function(){var t=this;return this.totalData.filter((function(e,a){return a>=20*(t.currentPage-1)&&a<20*t.currentPage}))}},watch:{currentPage:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))}},methods:{handleDelete:function(t,e){var a=this;console.log(t,e),this.$confirm("是否删除".concat(e.nickName,"的留言？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",e)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var t=this;console.log(this.totalData),this.searchBackShow=!0;var e=this.totalData.filter((function(e){var a=Object.values(e).filter((function(e){return e.toString().indexOf(t.searchValue)>=0}));return a.length>0}));this.$emit("search",e)}}},Xe=We,Ze=(a("5092"),Object(u["a"])(Xe,Ke,Qe,!1,null,"3c8b47d0",null)),ta=Ze.exports,ea=o["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),aa=ea.database(),ra={components:{Table:ta},data:function(){return{messageList:[]}},methods:{onSearch:function(t){console.log(t),this.messageList=t},messageDelete:function(t){var e=this;console.log(t),aa.collection("message").doc("messageList").get().then((function(a){console.log(a);var r=a.data[0].list.filter((function(e){return t.oldTime!==e.time}));console.log(r),0===t.children.length&&(r=a.data[0].list.map((function(e){return e.children=e.children.filter((function(e){return t.oldTime!==e.time})),e}))),aa.collection("message").doc("messageList").update({list:r}).then((function(){e.$message({message:"删除成功",type:"success",showClose:!0,duration:3e3}),e.getMessageList()}))}))},getMessageList:function(){var t=this;aa.collection("message").doc("messageList").get().then((function(e){console.log(e);var a=e.data[0].list.map((function(t){return t.oldTime=t.time,t.time=Te(t.time),t.children=t.children.map((function(t){return t.oldTime=t.time,t.time=Te(t.time),t})),t}));console.log(a),t.messageList=a}))}},mounted:function(){this.getMessageList()}},ia=ra,na=Object(u["a"])(ia,Ye,Ge,!1,null,"fe0b8ed0",null),oa=na.exports,sa=a("2f62"),la=a("bc3a"),ca=a.n(la),ua=ca.a.create();ua.interceptors.request.use((function(t){return t}));var ma=ua;function da(){return fa.apply(this,arguments)}function fa(){return fa=Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ma.get("/cgi-bin/token",{params:{grant_type:"client_credential",appid:"wx6e53479d56cb8153",secret:"4326902fe9c33333c1a650560389e461"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),fa.apply(this,arguments)}r["default"].use(sa["a"]);var pa=new sa["a"].Store({state:{access:"",user:M(),menuRoutes:[]},mutations:{setAccess:function(t,e){t.access=e},setUser:function(t,e){t.user=e},setMenuRoutes:function(t,e){t.menuRoutes=e}},actions:{accessChange:function(t){return Object($["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,da();case 2:a=e.sent,t.commit("setAccess",a.data.access_token),console.log(a.data);case 5:case"end":return e.stop()}}),e)})))()},loginOut:function(t){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.commit("setUser",""),U();case 2:case"end":return e.stop()}}),e)})))()},menuRoutesChange:function(t,e){return Object($["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.commit("setMenuRoutes",e);case 1:case"end":return a.stop()}}),a)})))()}},modules:{}});r["default"].use(f["a"]);var ha=[{path:"/club",name:"Club",component:tt,meta:{title:"社团",icon:"user-solid"},children:[{path:"list",name:"ClubList",component:Ct,meta:{title:"社员列表",icon:"s-grid"}},{path:"add",name:"ClubAdd",component:Et,meta:{title:"新增社员",icon:"circle-plus"}}]},{path:"/activity",name:"Activity",component:A,meta:{title:"活动",icon:"s-opportunity"},children:[{path:"list",name:"ActivityList",component:Pe,meta:{title:"活动列表",icon:"s-grid"}},{path:"add",name:"ActivityAdd",component:Je,meta:{title:"新增活动",icon:"circle-plus"}}]},{path:"/message",name:"Message",component:ot,meta:{title:"留言",icon:"s-comment"},children:[{path:"list",name:"MessageList",component:oa,meta:{title:"留言列表",icon:"s-grid"}}]}],ga=[].concat(ha,[{path:"/login",name:"Login",component:G},{path:"/",redirect:"/club/list"},{path:"*",redirect:"/club/list"}]),ba=new f["a"]({mode:"history",base:"/xzdj-b/",routes:ga});ba.beforeEach((function(t,e,a){if("/login"!==t.path){if(pa.state.user||"/login"==e.path&&"/club"==t.path)return pa.dispatch("menuRoutesChange",ha),a();a("/login")}return a()}));var va=ba,ya=a("5c96"),wa=a.n(ya);a("0fae");r["default"].use(wa.a);a("96b1");r["default"].config.productionTip=!1,new r["default"]({router:va,store:pa,render:function(t){return t(d)}}).$mount("#app")},6054:function(t,e,a){},"65bc":function(t,e,a){"use strict";a("8a9f")},"6a75":function(t,e,a){"use strict";a("6054")},"6cdc":function(t,e,a){"use strict";a("3caa")},"6faa":function(t,e,a){"use strict";a("7ddf")},"72bb":function(t,e,a){"use strict";a("f5b6")},7473:function(t,e,a){},"7a14":function(t,e,a){},"7ddf":function(t,e,a){},"85ec":function(t,e,a){},"8a9f":function(t,e,a){},"8efd":function(t,e,a){"use strict";a("3848")},"96b1":function(t,e,a){},"9ee4":function(t,e,a){},a604:function(t,e,a){"use strict";a("55cc")},abb5:function(t,e,a){},ac7e:function(t,e,a){},b6b2:function(t,e,a){"use strict";a("c881")},b84d:function(t,e,a){"use strict";a("5306")},c164:function(t,e,a){"use strict";a("edbf")},c446:function(t,e,a){},c881:function(t,e,a){},ce36:function(t,e,a){"use strict";a("c446")},d92e:function(t,e,a){"use strict";a("9ee4")},d965:function(t,e,a){"use strict";a("514d")},dbb7:function(t,e,a){"use strict";a("7a14")},e97b:function(t,e,a){"use strict";a("493d")},edbf:function(t,e,a){},ee86:function(t,e,a){},f5b6:function(t,e,a){},f611:function(t,e,a){},fdbe:function(t,e,a){"use strict";a("443a")}});
//# sourceMappingURL=app.852cedd4.js.map