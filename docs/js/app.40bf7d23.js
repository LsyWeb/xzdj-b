(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],m=0,d=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},i={app:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/xzdj-b/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0070":function(e,t,a){"use strict";a("f144")},"034f":function(e,t,a){"use strict";a("85ec")},"1db0":function(e,t,a){},2027:function(e,t,a){"use strict";a("1db0")},2179:function(e,t,a){"use strict";a("abb5")},"219c":function(e,t,a){"use strict";a("ee86")},"24d2":function(e,t,a){"use strict";a("481c")},2508:function(e,t,a){},3848:function(e,t,a){},"3caa":function(e,t,a){},"43f2":function(e,t,a){"use strict";a("ac7e")},"44b4":function(e,t,a){"use strict";a("8d4c")},"45c1":function(e,t,a){},"481c":function(e,t,a){},"493d":function(e,t,a){},5092:function(e,t,a){"use strict";a("7473")},"514d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],s=a("d148"),o=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"});o.auth({persistence:"session"}).anonymousAuthProvider().signIn().then((function(){})).catch((function(e){console.log(e)}));var l={name:"app",components:{},data:function(){return{}},methods:{}},c=l,u=(a("034f"),a("2877")),m=Object(u["a"])(c,i,n,!1,null,null,null),d=m.exports,f=(a("99af"),a("8c4f")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Layout")],1)},h=[],g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-container"},[a("div",{staticClass:"left"},[e._t("left",(function(){return[a("Menu",{staticClass:"heander-container"})]}))],2),a("div",{key:e.key,staticClass:"right"},[a("Header"),a("router-view")],1)])},b=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-container"},[a("el-menu",{key:e.key,staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":e.activePath,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e._l(e.routes,(function(t){return[t.meta.ishidden?e._e():a("el-submenu",{key:t.name,attrs:{index:t.meta.title}},[a("template",{slot:"title"},[a("i",{class:"el-icon-"+t.meta.icon}),a("span",[e._v(e._s(t.meta.title))])]),e._l(t.children,(function(t){return[t.meta.ishidden?e._e():a("el-menu-item",{key:t.name,attrs:{route:{name:t.name},index:t.meta.title}},[a("i",{class:"el-icon-"+t.meta.icon}),e._v(e._s(t.meta.title)+" ")])]}))],2)]}))],2)],1)},y=[],w={data:function(){return{key:(new Date).getTime()}},computed:{activePath:function(){return this.$route.meta.title},routes:function(){return this.$store.state.menuRoutes}},mounted:function(){this.key=(new Date).getTime()}},D=w,_=(a("65bc"),Object(u["a"])(D,v,y,!1,null,"07bf8e56",null)),x=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.path,(function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t.meta.title))])})),1),a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[e._v(" 欢迎"+e._s(e.user?e.user:"")),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("router-link",{staticClass:"login",attrs:{to:"/login"},nativeOn:{click:function(t){return e.handleLoginOut.apply(null,arguments)}}},[e._v("退出登录")])],1)],1)],1)],1)},S=[],$=a("1da1"),C=(a("96cf"),{data:function(){return{}},computed:{path:function(){return this.$route.matched},user:function(){return this.$store.state.user}},created:function(){},methods:{handleLoginOut:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("退出"),t.next=3,e.$store.dispatch("loginOut");case 3:case"end":return t.stop()}}),t)})))()}}}),q=C,T=(a("c164"),a("dbb7"),Object(u["a"])(q,k,S,!1,null,"f8307b50",null)),L=T.exports,O={data:function(){return{key:(new Date).getTime()}},components:{Menu:x,Header:L},watch:{$route:function(){this.key=(new Date).getTime()}}},j=O,F=(a("6a75"),Object(u["a"])(j,g,b,!1,null,"2bffe252",null)),N=F.exports,z={components:{Layout:N}},E=z,P=Object(u["a"])(E,p,h,!1,null,null,null),A=P.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"80px",inline:!1,size:"normal","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSubmit,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)}}},[e._v("登录")])],1)],1)],1)},V=[];a("b0c0");function I(e){return R.apply(this,arguments)}function R(){return R=Object($["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:localStorage.setItem("user",t);case 1:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function M(){return localStorage.getItem("user")}function U(){localStorage.removeItem("user")}var H={data:function(){return{form:{name:"",password:""},rules:{name:{required:!0,message:"请输入账号",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("提交"),e.$refs.form.validate((function(t){t?"liushuaiyang"!==e.form.name&&"admin_one"!==e.form.name&&"admin_two"!==e.form.name||"xzdjyyds"!==e.form.password?e.$message({message:"账号或密码错误",type:"error",duration:3e3}):(e.$message({message:"登录成功",type:"success",duration:3e3}),I(e.form.name),e.$store.commit("setUser",e.form.name),e.$router.push("/club/list")):e.$message({message:"信息未填写完整",type:"error",duration:3e3})}));case 2:case"end":return t.stop()}}),t)})))()}}},J=H,Y=(a("72bb"),Object(u["a"])(J,B,V,!1,null,"451b90a8",null)),G=Y.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"club-container"},[a("Layout")],1)},Q=[],W={components:{Layout:N}},X=W,Z=(a("2179"),Object(u["a"])(X,K,Q,!1,null,"3bfe13d6",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-container"},[a("Layout")],1)},ae=[],re={components:{Layout:N}},ie=re,ne=(a("d965"),Object(u["a"])(ie,te,ae,!1,null,"a77db3f6",null)),se=ne.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"club-list-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("搜索")]),e.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.searchBack}},[e._v("返回")]):e._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.toClubAddPage}},[e._v("新增社员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:0==e.tableData.length&&e.isLoading,expression:"tableData.length == 0 && isLoading"}],ref:"table",staticClass:"club-table"},[a("el-table",{attrs:{data:e.tableData,"highlight-current-row":"",stripe:"",border:""}},[e._l(e.columns,(function(e){return a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,align:"center"}})})),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2)],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{background:"",layout:" total , prev, pager, next","page-size":20,total:e.totalData.length,"current-page":e.currentPage,"current-change":e.currentChange},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),a("el-dialog",{attrs:{title:"编辑",center:"",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("EditForm",{attrs:{formData:e.editFormData},on:{formSubmit:e.editFormSubmit}})],1)],1)},le=[],ce=a("5530"),ue=(a("4de4"),a("07ac"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-form-container"},[a("Form",{attrs:{form:e.formData},on:{formSubmit:e.formSubmit}})],1)}),me=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class",t)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",e._n(t))},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.gradeOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:e.form.faculty,callback:function(t){e.$set(e.form,"faculty",t)},expression:"form.faculty"}},e._l(e.facultyOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},fe=[],pe={props:{form:Object},data:function(){var e=function(e,t,a){console.log(t+""),11!==(t+"").length?a(new Error("手机号格式不正确")):a()};return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"},{type:"number",message:"必须填写数字",trigger:"change"}]},gradeOptions:["21级","20级","19级"],facultyOptions:["信息系","财经系","医疗系","人文系","建工系","艺术系","外国语","机电系","航空系","园林系","五年制部"]}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t,a){console.log(t,a),t?(e.form.id=e.form.name+e.form.mobile,e.form.fac=[e.form.grade,e.form.faculty],console.log(e.form),e.$emit("formSubmit",e.form)):e.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},he=pe,ge=(a("ff69"),Object(u["a"])(he,de,fe,!1,null,"83506b62",null)),be=ge.exports,ve={props:{formData:Object},components:{Form:be},methods:{formSubmit:function(e){this.$emit("formSubmit",e)}}},ye=ve,we=(a("2027"),Object(u["a"])(ye,ue,me,!1,null,"5649a19d",null)),De=we.exports,_e=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),xe=_e.database(),ke={components:{EditForm:De},data:function(){return{isLoading:!0,searchValue:"",searchBackShow:!1,columns:[{label:"姓名",id:"name"},{label:"年级",id:"grade"},{label:"院系",id:"faculty"},{label:"班级",id:"class"},{label:"手机号",id:"mobile"}],totalData:[],currentPage:1,dialogVisible:!1,editFormData:[]}},computed:{tableData:function(){var e=this;return this.totalData.filter((function(t,a){return a>=20*(e.currentPage-1)&&a<20*e.currentPage}))}},watch:{currentPage:function(){this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.isLoading=!0,this.getDatabase())}},methods:{searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.isLoading=!0,this.getDatabase()},searchSubmit:function(){var e=this;this.searchBackShow=!0,this.totalData=this.totalData.filter((function(t){var a=Object.values(t).filter((function(t){return t.indexOf(e.searchValue)>=0}));return a.length>0})),0==this.totalData.length&&(this.isLoading=!1)},handleDelete:function(e,t){var a=this;return Object($["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log(e,t),a.$confirm("是否删除姓名为".concat(t.name,"的学生？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.totalData=a.totalData.filter((function(e){return e.id!==t.id})),console.log(a.totalData),a.updateDatabase(),a.$message({type:"success",message:"删除成功!"});case 4:case"end":return e.stop()}}),e)})))).catch((function(){a.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return r.stop()}}),r)})))()},editFormSubmit:function(e){this.dialogVisible=!1,console.log(e),this.totalData=this.totalData.map((function(t){return t.id===e.id&&(t=e),t})),this.updateDatabase()},handleEdit:function(e,t){console.log(e,t),this.dialogVisible=!0,this.editFormData=Object(ce["a"])({},t)},toClubAddPage:function(){this.$router.push({name:"ClubAdd"})},currentChange:function(e){console.log(this.currentPage),this.currentPage=e},updateDatabase:function(){xe.collection("community").doc("clubList").update({data:this.totalData}).then((function(e){console.log(e)}))},getDatabase:function(){var e=this;xe.collection("community").doc("clubList").get().then((function(t){var a=t.data[0].data;console.log(a);var r=a.map((function(e){return e.mobile=parseInt(e.mobile),e.grade=e.fac[0],e.faculty=e.fac[1],e}));e.totalData=r,console.log(r)}))}},mounted:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getDatabase();case 1:case"end":return t.stop()}}),t)})))()}},Se=ke,$e=(a("44b4"),Object(u["a"])(Se,oe,le,!1,null,"4d328c3a",null)),Ce=$e.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"club-add-container"},[a("div",{staticClass:"content"},[a("Form",{attrs:{form:e.formAddData},on:{formSubmit:e.formAddSubmit}})],1)])},Te=[],Le=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),Oe=Le.database(),je=Oe.command,Fe={components:{Form:be},data:function(){return{formAddData:{name:"",id:"",grade:"",faculty:"",class:"",mobile:""}}},methods:{formAddSubmit:function(e){var t=this;console.log(e),Oe.collection("community").doc("clubList").update({data:je.push(e)}).then((function(e){console.log(e),t.$message({message:"新增成功",type:"success",showClose:!0,duration:3e3}),t.$router.push({name:"ClubList"})})).catch((function(e){console.log(e)}))}}},Ne=Fe,ze=(a("43f2"),Object(u["a"])(Ne,qe,Te,!1,null,"ccd72900",null)),Ee=ze.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-list-container"},[a("el-tabs",{staticClass:"tabs"},[a("el-tab-pane",{attrs:{label:"正在进行"}},[a("div",{staticClass:"tabs-list"},[e._l(e.activityList,(function(t,r){return[e.nowTime>t.startTime&&e.nowTime<t.endTime?a("el-card",{key:"now"+t.id,staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v(e._s(t.title))]),a("div",{attrs:{dispa:""}},[a("el-button",{staticStyle:{"margin-top":"10px",padding:"0px"},attrs:{type:"text","data-id":t.id,"data-index":r},on:{click:e.showDrawerChange}},[e._v(e._s("team"===t.regType?"查看报名队伍":"查看报名人员"))]),a("el-button",{staticStyle:{margin:"10px 0 0 20px",padding:"0px",color:"rgb(0, 200, 0)"},attrs:{"data-id":t.id,"data-index":r,type:"text",size:"default"},on:{click:e.activityEdit}},[e._v("编辑")]),a("el-button",{staticStyle:{float:"right",margin:"10px 0 0 20px",padding:"0px",color:"#f00"},attrs:{"data-id":t.id,"data-index":r,type:"text",size:"default"},on:{click:e.activityDelete}},[e._v("删除")])],1)]),a("div",{staticClass:"text item"},[a("div",[e._v(e._s(t.desc))]),"team"===t.regType?a("div",{staticClass:"gray"},[e._v("总名额："+e._s(t.total/t.teamNum)+"支")]):a("div",{staticClass:"gray"},[e._v("总名额："+e._s(t.total)+"人")]),"team"===t.regType?a("div",{staticClass:"gray"},[e._v(" 剩余队伍名额： "),a("span",[e._v(e._s(t.total/t.teamNum-t.teamList.length)+" ")]),e._v("支 ")]):a("div",{staticClass:"gray"},[e._v(" 剩余名额： "),a("span",[e._v(e._s(t.total-t.regList.length)+" ")]),e._v("人 ")]),a("div",{staticClass:"gray"},[e._v("报名截止时间："+e._s(t.overTime))])])]):e._e()]})),e.isShowActiveList?a("el-empty",{staticStyle:{margin:"0 auto"},attrs:{"image-size":200}}):e._e()],2)]),a("el-tab-pane",{attrs:{label:"已结束"}},[a("div",{staticClass:"tabs-list"},[e._l(e.activityList,(function(t,r){return[e.nowTime>t.endTime?a("el-card",{key:"end"+t.id,staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v(e._s(t.title))]),a("div",[a("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text","data-id":t.id,"data-index":r},on:{click:e.showDrawerChange}},[e._v(e._s("team"===t.regType?"查看报名队伍":"查看报名人员"))]),a("el-button",{staticStyle:{padding:"3px 0 3px 20px",color:"#f00"},attrs:{"data-id":t.id,"data-index":r,type:"text",size:"default"},on:{click:e.activityDelete}},[e._v("删除")])],1)]),a("div",{staticClass:"text item"},[a("div",[e._v(e._s(t.desc))]),a("div",{staticClass:"gray"},[e._v("总名额："+e._s(t.total)+"人")]),"team"===t.regType?a("div",{staticClass:"gray"},[e._v(" 参加队伍： "),a("span",[e._v(e._s(t.teamList.length)+" ")]),e._v("支 ")]):a("div",{staticClass:"gray"},[e._v(" 参加人数： "),a("span",[e._v(e._s(t.regList.length)+" ")]),e._v("人 ")]),a("div",{staticClass:"gray"},[e._v("活动截止日期："+e._s(t.overTime))])])]):e._e()]})),e.isShowOverList?a("el-empty",{staticStyle:{margin:"0 auto"},attrs:{"image-size":200}}):e._e()],2)])],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:e.isShowActivityDrawer,direction:"rtl",size:"70%"},on:{"update:visible":function(t){e.isShowActivityDrawer=t}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[e._v("修改活动信息")]),a("activityForm",{key:"edit",attrs:{formData:e.acitvityEditForm,type:"edit"},on:{editActivitySubmit:e.editActivitySubmit}})],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:e.isShowDrawer,direction:"rtl",size:"50%"},on:{"update:visible":function(t){e.isShowDrawer=t}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[e._v("报名人员")]),a("Table",{attrs:{totalData:e.detailList},on:{detailAdd:e.detailAdd,detailDelete:e.detailDelete,showEditForm:e.showEditForm,search:e.onSearch,getNewData:e.getDatabase}}),a("el-drawer",{attrs:{"append-to-body":"",visible:e.isShowInnerDrawer1,direction:"rtl",size:"30%"},on:{"update:visible":function(t){e.isShowInnerDrawer1=t}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[e._v("修改人员信息")]),a("EditForm",{key:"personal",attrs:{form:e.editFormData,facultyOptions:e.FacultyOptions},on:{formSubmit:e.editFormSubmit}})],1),a("el-drawer",{attrs:{"append-to-body":"",visible:e.isShowInnerDrawer2,direction:"rtl",size:"30%"},on:{"update:visible":function(t){e.isShowInnerDrawer2=t}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[e._v("新增参赛人员")]),a("AddForm",{key:"personal",attrs:{form:e.addFormData,facultyOptions:e.FacultyOptions},on:{formSubmit:e.AddFormSubmit}})],1)],1),a("el-drawer",{attrs:{"custom-class":"drawer",visible:e.isShowTeamDrawer,direction:"rtl",size:"60%"},on:{"update:visible":function(t){e.isShowTeamDrawer=t}}},[a("h2",{attrs:{slot:"title"},slot:"title"},[e._v("报名队伍")]),a("TeamTable",{attrs:{totalData:e.detailList,teamNum:e.teamNum},on:{detailAdd:e.detailAdd,detailDelete:e.detailDelete,showEditForm:e.showEditForm,search:e.onSearch,getNewData:e.getDatabase}}),a("el-drawer",{attrs:{"append-to-body":"",visible:e.isShowInnerTeamDrawer1,direction:"rtl",size:"30%"},on:{"update:visible":function(t){e.isShowInnerTeamDrawer1=t}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[e._v("修改人员信息")]),a("TeamEditForm",{key:"team",attrs:{form:e.editFormData},on:{formSubmit:e.editFormSubmit}})],1),a("el-drawer",{attrs:{"append-to-body":"",visible:e.isShowInnerTeamDrawer2,direction:"rtl",size:"30%"},on:{"update:visible":function(t){e.isShowInnerTeamDrawer2=t}}},[a("h3",{attrs:{slot:"title"},slot:"title"},[e._v("新增参赛人员")]),a("TeamAddForm",{key:"team",attrs:{form:e.addFormData},on:{formSubmit:e.AddFormSubmit}})],1)],1)],1)},Ae=[],Be=a("ade3"),Ve=(a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("搜索")]),e.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.searchBack}},[e._v("返回")]):e._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailAdd}},[e._v("新增人员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:e.data,border:"","highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"grade",label:"年级",align:"center"}}),a("el-table-column",{attrs:{prop:"faculty",label:"院系",align:"center"}}),a("el-table-column",{attrs:{prop:"class",label:"班级",align:"center"}}),a("el-table-column",{attrs:{prop:"qq",label:"qq",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:e.totalData.length,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)}),Ie=[],Re=(a("d3b7"),a("25f0"),{props:{totalData:Array,toPage:String},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1}},computed:{data:function(){var e=this;return this.totalData.filter((function(t,a){return a>=20*(e.currentPage-1)&&a<20*e.currentPage}))}},watch:{currentPage:function(){var e=this;this.isLoading=!0,setTimeout((function(){e.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))}},methods:{handleDelete:function(e,t){var a=this;this.$confirm("是否删除名字为".concat(t.name,"的成员？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleEdit:function(e,t){console.log(e,t);var a=Object(ce["a"])({},t);this.$emit("showEditForm",a)},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var e=this;this.searchBackShow=!0;var t=this.totalData.filter((function(t){var a=Object.values(t).filter((function(t){return t.toString().indexOf(e.searchValue)>=0}));return a.length>0}));this.$emit("search",t)},detailAdd:function(){this.$emit("detailAdd")}}}),Me=Re,Ue=(a("6cdc"),Object(u["a"])(Me,Ve,Ie,!1,null,"ecd8c0c2",null)),He=Ue.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("搜索")]),e.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.searchBack}},[e._v("返回")]):e._e()],1),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.detailAdd}},[e._v("新增人员")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:e.data,border:"","highlight-current-row":"",stripe:""}},[e._l(e.tableList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,align:"center"}})})),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:e.totalData.length,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},Ye=[],Ge=(a("a9e3"),{props:{totalData:Array,teamNum:Number},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1,tableList:[{value:"captain",label:"队长"},{value:"teamNumber1",label:"队员1"},{value:"teamNumber2",label:"队员2"},{value:"teamNumber3",label:"队员3"},{value:"teamNumber4",label:"队员4"},{value:"qq",label:"队长联系qq"}]}},computed:{data:function(){var e=this;return this.totalData.filter((function(t,a){return a>=20*(e.currentPage-1)&&a<20*e.currentPage}))}},watch:{currentPage:function(){var e=this;this.isLoading=!0,setTimeout((function(){e.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))},teamNum:function(){for(var e=[],t=0;t<this.teamNum-1;t++)e.push({value:"teamNumber".concat(t+1),label:"队员".concat(t+1)});this.tableList=[{value:"captain",label:"队长"}].concat(e,[{value:"qq",label:"队长联系qq"}]),console.log(this.teamNum,this.tableList)}},methods:{handleDelete:function(e,t){var a=this;this.$confirm("是否删除队长为".concat(t.captain,"的成员？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},handleEdit:function(e,t){console.log(e,t);var a=Object(ce["a"])({},t);this.$emit("showEditForm",a)},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var e=this;this.searchBackShow=!0;var t=this.totalData.filter((function(t){var a=Object.values(t).filter((function(t){return t.toString().indexOf(e.searchValue)>=0}));return a.length>0}));this.$emit("search",t)},detailAdd:function(){this.$emit("detailAdd")}}}),Ke=Ge,Qe=(a("219c"),Object(u["a"])(Ke,Je,Ye,!1,null,"39005cd6",null)),We=Qe.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class",t)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"qq",prop:"qq"}},[a("el-input",{model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.gradeOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:e.form.faculty,callback:function(t){e.$set(e.form,"faculty",e._n(t))},expression:"form.faculty"}},e._l(e.facultyOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},Ze=[],et={props:{form:Object,facultyOptions:Array},data:function(){return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},qq:[{required:!0,message:"请输入qq",trigger:"blur"}]},gradeOptions:["21级","20级","19级"]}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t,a){console.log(t,a),t?(e.form.id=e.form.name+e.form.qq,e.form.fac=[e.form.grade,e.form.faculty],console.log(e.form),e.$emit("formSubmit",e.form)):e.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},tt=et,at=(a("24d2"),Object(u["a"])(tt,Xe,Ze,!1,null,"4f4a9480",null)),rt=at.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"100px"}},[e._l(e.formList,(function(t){return a("el-form-item",{key:t.name,attrs:{label:t.label,prop:t.name}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1)})),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],2)],1)},nt=[],st={props:{form:Object},data:function(){return{formList:[{name:"captain",label:"队长"},{name:"teamNumber1",label:"队员1"},{name:"teamNumber2",label:"队员2"},{name:"teamNumber3",label:"队员3"},{name:"teamNumber4",label:"队员4"},{name:"qq",label:"队长联系qq"}],rules:{captain:{required:!0,message:"请输入队长信息",trigger:"blur"},teamNumber1:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber2:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber3:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber4:{required:!0,message:"请输入人员信息",trigger:"blur"},qq:[{required:!0,message:"请输入qq",trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t,a){console.log(t,a),t?(e.form.id=e.form.acptain+e.form.qq,console.log(e.form),e.$emit("formSubmit",e.form)):e.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},ot=st,lt=(a("69fc"),Object(u["a"])(ot,it,nt,!1,null,"47a8287e",null)),ct=lt.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.class,callback:function(t){e.$set(e.form,"class",t)},expression:"form.class"}})],1),a("el-form-item",{attrs:{label:"qq",prop:"qq"}},[a("el-input",{model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),a("el-form-item",{attrs:{label:"年级",prop:"grade",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.gradeOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty",size:"normal"}},[a("el-select",{attrs:{placeholder:"请选择院系"},model:{value:e.form.faculty,callback:function(t){e.$set(e.form,"faculty",t)},expression:"form.faculty"}},e._l(e.facultyOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],1)],1)},mt=[],dt={props:{form:Object,facultyOptions:Array},data:function(){return{rules:{name:{required:!0,message:"请输入姓名",trigger:"blur"},grade:{required:!0,message:"请选择年级",trigger:"change"},faculty:{required:!0,message:"请选择院系",trigger:"change"},class:{required:!0,message:"请输入班级",trigger:"blur"},qq:[{required:!0,message:"请输入手机号",trigger:"blur"}]},gradeOptions:["21级","20级","19级"]}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t,a){console.log(t,a),t?(e.form.id=e.form.name+e.form.qq,e.form.fac=[e.form.grade,e.form.faculty],console.log(e.form),e.$emit("formSubmit",e.form)):e.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},ft=dt,pt=(a("b2a8"),Object(u["a"])(ft,ut,mt,!1,null,"7516fba6",null)),ht=pt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"form",staticClass:"form",attrs:{rules:e.rules,model:e.formData,"status-icon":"",inline:!1,"label-width":"100px",size:"normal"}},[a("div",{staticClass:"wrap"},[a("div",[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入活动标题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"请输入活动描述"},model:{value:e.formData.desc,callback:function(t){e.$set(e.formData,"desc",t)},expression:"formData.desc"}})],1),a("el-form-item",{attrs:{label:"总人数",prop:"total"}},[a("el-input",{attrs:{placeholder:"请输入活动参加总人数"},model:{value:e.formData.total,callback:function(t){e.$set(e.formData,"total",e._n(t))},expression:"formData.total"}})],1),a("el-form-item",{attrs:{label:"报名方式",prop:"regType"}},[a("el-select",{attrs:{placeholder:"请选择报名方式"},model:{value:e.formData.regType,callback:function(t){e.$set(e.formData,"regType",t)},expression:"formData.regType"}},e._l(e.regTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"队伍人数",prop:"teamNum"}},[a("el-input",{attrs:{placeholder:"请输入队伍人数"},model:{value:e.formData.teamNum,callback:function(t){e.$set(e.formData,"teamNum",e._n(t))},expression:"formData.teamNum"}})],1)],1),a("div",[a("el-form-item",{attrs:{label:"日期",prop:"date"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),a("el-form-item",{attrs:{label:"院系",prop:"faculty"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择可以参加活动的院系"},model:{value:e.formData.faculty,callback:function(t){e.$set(e.formData,"faculty",t)},expression:"formData.faculty"}},e._l(e.facultyOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"比赛群号",prop:"qunNum"}},[a("el-input",{attrs:{placeholder:"请输入活动的比赛群号"},model:{value:e.formData.qunNum,callback:function(t){e.$set(e.formData,"qunNum",t)},expression:"formData.qunNum"}})],1),a("el-form-item",{attrs:{label:"群二维码",prop:"qrcode"}},[a("el-upload",{attrs:{action:"#","list-type":"picture-card","on-change":e.qrcodeUrlChange,"auto-upload":!1,"file-list":e.fileList},scopedSlots:e._u([{key:"file",fn:function(t){var r=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:r.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(r)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(r)}}},[a("i",{staticClass:"el-icon-delete"})])])])}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",height:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)},bt=[],vt=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),yt={props:{formData:Object,type:String},data:function(){var e=this,t=function(t,a,r){"team"==e.formData.regType&&(a?r():r(new Error("报名方式为团队时，队伍人数必填")))};return{formItems:[{label:"标题",prop:"title"},{label:"描述",prop:"desc"},{label:"总人数",prop:"total"},{label:"开始时间",prop:"startTime"},{label:"结束时间",prop:"endTime"},{label:"院系",prop:"faculty"},{label:"比赛群号",prop:"qunNum"},{label:"群二维码",prop:"qrcode"}],rulesFrom:{},rules:{title:{required:!0,message:"请输入标题",trigger:"blur"},desc:{required:!0,message:"描述不能为空",trigger:"blur"},total:[{required:!0,message:"请输入总人数",trigger:"blur"},{type:"number",message:"必须填写数字",trigger:"change"}],regType:{required:!0,message:"请选择报名方式",trigger:"blur"},teamNum:[{validator:t,trigger:"blur"},{type:"number",message:"必须填写数字",trigger:"change"}],date:{required:!0,message:"请选择日期",trigger:"blur"},faculty:{required:!0,message:"请选择院系",trigger:"blur"},qunNum:[{required:!0,message:"请输入比赛群号",trigger:"blur"}],qrcode:{required:!0,message:"请上传比赛群的二维码",trigger:"blur"}},facultyOptions:["信息系","财经系","医疗系","人文系","建工系","艺术系","外国语","机电系","航空系","园林系","五年制部"],regTypeOptions:[{value:"team",label:"团队"},{value:"personal",label:"个人"}],fileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1}},watch:{dialogImageUrl:function(){console.log(this.dialogImageUrl)}},methods:{qrcodeUrlChange:function(e,t){var a=this;console.log(e,t),vt.uploadFile({cloudPath:"社团/activity/".concat(this.formData.title,"-").concat(e.name),filePath:e.raw}).then((function(e){a.$message({message:"图片上传成功",type:"success",showClose:!0,duration:3e3}),a.formData.qrcode=e.fileID,console.log(e)}))},handleRemove:function(e){console.log(e),this.fileList=this.fileList.filter((function(t){return e==t}))},handlePictureCardPreview:function(e){this.dialogVisible=!0,this.dialogImageUrl=e.url},onSubmit:function(){var e=this;console.log(this.formData),this.formData.startTime=this.formData.date[0],this.formData.endTime=this.formData.date[1],console.log(this.formData.startTime,this.formData.endTime),this.type||(this.formData.regList=[],this.formData.teamList=[]),this.$refs.form.validate((function(t,a){if(t)console.log(t),e.type?e.$emit("editActivitySubmit",e.formData):e.$emit("formSubmit",e.formData);else{var r=Object.values(a)[0][0].message;e.$message({message:r,type:"error",showClose:!0,duration:3e3})}}))}}},wt=yt,Dt=(a("b6b2"),a("c677"),Object(u["a"])(wt,gt,bt,!1,null,"8bd6d8a6",null)),_t=Dt.exports,xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-form-container"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-position":"left","label-width":"100px"}},[e._l(e.formList,(function(t){return a("el-form-item",{key:t.name,attrs:{label:t.label,prop:t.name}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")])],1)],2)],1)},kt=[],St={props:{form:Object},data:function(){return{formList:[{name:"captain",label:"队长"},{name:"teamNumber1",label:"队员1"},{name:"teamNumber2",label:"队员2"},{name:"teamNumber3",label:"队员3"},{name:"teamNumber4",label:"队员4"},{name:"qq",label:"队长联系qq"}],rules:{captain:{required:!0,message:"请输入队长信息",trigger:"blur"},teamNumber1:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber2:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber3:{required:!0,message:"请输入人员信息",trigger:"blur"},teamNumber4:{required:!0,message:"请输入人员信息",trigger:"blur"},qq:[{required:!0,message:"请输入qq",trigger:"blur"}]}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t,a){console.log(t,a),t?(e.form.id=e.form.captain+e.form.qq,console.log(e.form),e.$emit("formSubmit",e.form)):e.$message({message:"信息有误",type:"error",showClose:!0,duration:3e3})}))}}},$t=St,Ct=(a("0070"),Object(u["a"])($t,xt,kt,!1,null,"bbffe188",null)),qt=Ct.exports;function Tt(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return"".concat(a,"-").concat(r,"-").concat(i)}function Lt(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),n=t.getHours(),s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return"".concat(a,"-").concat(r,"-").concat(i," - ").concat(n,":").concat(s,":").concat(o)}var Ot=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),jt=Ot.database(),Ft=jt.command,Nt={components:{Table:He,TeamTable:We,EditForm:rt,TeamEditForm:ct,AddForm:ht,TeamAddForm:qt,activityForm:_t},data:function(){return{isShowActiveList:!0,isShowOverList:!0,activityList:[],acitvityEditForm:{},teamNum:0,nowTime:new Date,isShowDrawer:!1,isShowActivityDrawer:!1,isShowTeamDrawer:!1,isShowInnerDrawer1:!1,isShowInnerDrawer2:!1,isShowInnerTeamDrawer1:!1,isShowInnerTeamDrawer2:!1,detailList:[],id:"",editFormData:{},FacultyOptions:[],addFormData:{name:"",qq:"",grade:"",faculty:"",fac:[],id:""}}},mounted:function(){this.getDatabase()},methods:{onSearch:function(e){this.detailList=e},AddFormSubmit:function(e){var t=this;console.log(e);var a="team"===this.type?"teamList":"regList";jt.collection("community").doc("activityList").update(Object(Be["a"])({},"list.".concat(this.index,".").concat(a),Ft.push(e))).then((function(e){t.getDatabase(),t.$message({message:"新增成功",type:"success",showClose:!0,duration:3e3}),"team"!==t.type?(t.isShowInnerDrawer2=!1,console.log(e)):t.isShowInnerTeamDrawer2=!1}))},detailAdd:function(){"team"!==this.type?this.isShowInnerDrawer2=!0:this.isShowInnerTeamDrawer2=!0},detailDelete:function(e){var t=this;console.log(this.id);var a=this.detailList.filter((function(t){return t.id!==e.id})),r="team"===this.type?"teamList":"regList";console.log(r,a),jt.collection("community").doc("activityList").update(Object(Be["a"])({},"list.".concat(this.index,".").concat(r),a)).then((function(e){t.getDatabase(),t.$message({message:"删除成功",type:"success",showClose:!0,duration:3e3}),console.log(e)})).catch((function(e){t.$message({message:"删除失败,错误信息：".concat(e),type:"error",showClose:!0,duration:3e3}),"team"!==t.type?t.isShowInnerDrawer2=!1:t.isShowInnerTeamDrawer2=!1}))},editFormSubmit:function(e){var t=this,a=0;this.detailList.forEach((function(t,r){t.id==e.id&&(a=r)}));var r="team"===this.type?"teamList":"regList";jt.collection("community").doc("activityList").update(Object(Be["a"])({},"list.".concat(this.index,".").concat(r,".").concat(a),e)).then((function(e){t.getDatabase(),t.$message({message:"修改成功",type:"success",showClose:!0,duration:3e3}),"team"!==t.type?(t.isShowInnerDrawer1=!1,console.log(e)):t.isShowInnerTeamDrawer1=!1}))},showEditForm:function(e){"team"===this.type?this.isShowInnerTeamDrawer1=!0:this.isShowInnerDrawer1=!0,this.editFormData=e},showDrawerChange:function(e){var t=this;console.log(e),this.id=e.path[1].dataset.id,this.index=e.path[1].dataset.index,console.log(this.index),this.activityList.forEach((function(e,a){e.id==t.id&&(t.index=a,t.type=e.regType)})),this.getDatabase(),"team"!==this.type?this.isShowDrawer=!0:this.isShowTeamDrawer=!0},activityDelete:function(e){var t=this;this.id=e.path[1].dataset.id,this.index=e.path[1].dataset.index,console.log(this.index),this.$confirm("确定要删除该活动吗？此操作不可逆！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.activityList.filter((function(e){return e.id!==t.id}));console.log(e);var a=e.map((function(e){return e.startTime=Tt(e.startTime),e.endTime=Tt(e.endTime),e}));jt.collection("community").doc("activityList").update(Object(Be["a"])({},"list",a)).then((function(e){console.log(e),t.getDatabase()}))})).catch((function(){}))},activityEdit:function(e){console.log("修改活动信息");var t=e.path[1].dataset.id,a=this.activityList.filter((function(e){return e.id==t}));this.acitvityEditForm=Object(ce["a"])({},a[0]),this.isShowActivityDrawer=!0},editActivitySubmit:function(e){var t=this;console.log(e);var a=0;this.detailList.forEach((function(t,r){t.id==e.id&&(a=r)})),jt.collection("community").doc("activityList").update(Object(Be["a"])({},"list.".concat(a),e)).then((function(e){t.getDatabase(),t.$message({message:"修改成功",type:"success",showClose:!0,duration:3e3}),t.getDatabase(),t.isShowActivityDrawer=!1,console.log(e)}))},getDatabase:function(){var e=this;jt.collection("community").doc("activityList").get().then((function(t){if(e.isShowDrawer||e.isShowTeamDrawer){var a=t.data[0].list.filter((function(t){return t.id==e.id}));console.log(a),"team"===e.type?(e.detailList=a[0].teamList,e.teamNum=a[0].teamNum):(e.FacultyOptions=a[0].faculty,e.detailList=a[0].regList.map((function(e){return Object(ce["a"])(Object(ce["a"])({},e),{},{grade:e.fac[0],faculty:e.fac[1]})})))}console.log(t.data[0].list);var r=t.data[0].list.map((function(t){return t.overTime=t.endTime,t.startTime=new Date(t.startTime).getTime(),t.endTime=new Date(t.endTime).getTime(),t.startTime<e.nowTime&&t.endTime>e.nowTime&&(e.isShowActiveList=!1),t.endTime<e.nowTime&&(e.isShowOverList=!1),t}));console.log(r),e.activityList=r,console.log(e.activityList)}))}}},zt=Nt,Et=(a("867e"),a("e97b"),Object(u["a"])(zt,Pe,Ae,!1,null,"02618dae",null)),Pt=Et.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity-add-container"},[a("Form",{attrs:{formData:e.formData},on:{formSubmit:e.formSubmit}})],1)},Bt=[],Vt=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),It=Vt.database(),Rt=It.command,Mt={components:{Form:_t},data:function(){return{formData:{title:"",desc:"",total:"",regType:"",teamList:[],teamNum:"",date:"",startTime:"",endTime:"",faculty:"",qunNum:"",qrcode:""}}},methods:{formSubmit:function(e){var t=this;console.log(e),e.id=e.title+(new Date).getTime(),It.collection("community").doc("activityList").update({list:Rt.unshift(e)}).then((function(){t.$message({message:"活动添加成功",type:"success",showClose:!0,duration:3e3}),t.$router.push({name:"ActivityList"})}))}}},Ut=Mt,Ht=(a("8efd"),Object(u["a"])(Ut,At,Bt,!1,null,"5a141078",null)),Jt=Ht.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"message-list-container"},[a("Table",{attrs:{totalData:e.messageList},on:{detailDelete:e.messageDelete,search:e.onSearch,getNewData:e.getMessageList}})],1)},Gt=[],Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("div",{staticClass:"search"},[a("div",{staticClass:"left"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:"输入关键字搜索",size:"normal",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("搜索")]),e.searchBackShow?a("el-button",{attrs:{type:"info",size:"small"},on:{click:e.searchBack}},[e._v("返回")]):e._e()],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"table",staticClass:"table"},[a("el-table",{attrs:{data:e.data,border:"","highlight-current-row":"",stripe:"","row-key":"time","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"nickName",label:"昵称",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}}),a("el-table-column",{attrs:{prop:"time",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"likeNum",label:"获赞数",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-pagination",{staticClass:"pager",attrs:{background:"",layout:"total , prev, pager, next","page-size":20,total:e.totalData.length,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},Qt=[],Wt={props:{totalData:Array,toPage:String},data:function(){return{isLoading:!1,searchValue:"",searchBackShow:!1,currentPage:1}},computed:{data:function(){var e=this;return this.totalData.filter((function(t,a){return a>=20*(e.currentPage-1)&&a<20*e.currentPage}))}},watch:{currentPage:function(){var e=this;this.isLoading=!0,setTimeout((function(){e.isLoading=!1}),500),this.$refs.table.scrollTop=0},searchValue:function(){""==this.searchValue&&(this.searchBackShow=!1,this.$emit("getNewData"))}},methods:{handleDelete:function(e,t){var a=this;console.log(e,t),this.$confirm("是否删除".concat(t.nickName,"的留言？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$emit("detailDelete",t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},searchBack:function(){this.searchBackShow=!1,this.searchValue="",this.$emit("getNewData")},searchSubmit:function(){var e=this;console.log(this.totalData),this.searchBackShow=!0;var t=this.totalData.filter((function(t){var a=Object.values(t).filter((function(t){return t.toString().indexOf(e.searchValue)>=0}));return a.length>0}));this.$emit("search",t)}}},Xt=Wt,Zt=(a("5092"),Object(u["a"])(Xt,Kt,Qt,!1,null,"3c8b47d0",null)),ea=Zt.exports,ta=s["a"].init({env:"xzdj-8gx7xdmm79cf5415"}),aa=ta.database(),ra={components:{Table:ea},data:function(){return{messageList:[]}},methods:{onSearch:function(e){console.log(e),this.messageList=e},messageDelete:function(e){var t=this;console.log(e),aa.collection("message").doc("messageList").get().then((function(a){console.log(a);var r=a.data[0].list.filter((function(t){return e.oldTime!==t.time}));console.log(r),0===e.children.length&&(r=a.data[0].list.map((function(t){return t.children=t.children.filter((function(t){return e.oldTime!==t.time})),t}))),aa.collection("message").doc("messageList").update({list:r}).then((function(){t.$message({message:"删除成功",type:"success",showClose:!0,duration:3e3}),t.getMessageList()}))}))},getMessageList:function(){var e=this;aa.collection("message").doc("messageList").get().then((function(t){console.log(t);var a=t.data[0].list.map((function(e){return e.oldTime=e.time,e.time=Lt(e.time),e.children=e.children.map((function(e){return e.oldTime=e.time,e.time=Lt(e.time),e})),e}));console.log(a),e.messageList=a}))}},mounted:function(){this.getMessageList()}},ia=ra,na=Object(u["a"])(ia,Yt,Gt,!1,null,"fe0b8ed0",null),sa=na.exports,oa=a("2f62"),la=a("bc3a"),ca=a.n(la),ua=ca.a.create();ua.interceptors.request.use((function(e){return e}));var ma=ua;function da(){return fa.apply(this,arguments)}function fa(){return fa=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ma.get("/cgi-bin/token",{params:{grant_type:"client_credential",appid:"wx6e53479d56cb8153",secret:"4326902fe9c33333c1a650560389e461"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}r["default"].use(oa["a"]);var pa=new oa["a"].Store({state:{access:"",user:M(),menuRoutes:[]},mutations:{setAccess:function(e,t){e.access=t},setUser:function(e,t){e.user=t},setMenuRoutes:function(e,t){e.menuRoutes=t}},actions:{accessChange:function(e){return Object($["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,da();case 2:a=t.sent,e.commit("setAccess",a.data.access_token),console.log(a.data);case 5:case"end":return t.stop()}}),t)})))()},loginOut:function(e){return Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("setUser",""),U();case 2:case"end":return t.stop()}}),t)})))()},menuRoutesChange:function(e,t){return Object($["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.commit("setMenuRoutes",t);case 1:case"end":return a.stop()}}),a)})))()}},modules:{}});r["default"].use(f["a"]);var ha=[{path:"/club",name:"Club",component:ee,meta:{title:"社团",icon:"user-solid"},children:[{path:"list",name:"ClubList",component:Ce,meta:{title:"社员列表",icon:"s-grid"}},{path:"add",name:"ClubAdd",component:Ee,meta:{title:"新增社员",icon:"circle-plus"}}]},{path:"/activity",name:"Activity",component:A,meta:{title:"活动",icon:"s-opportunity"},children:[{path:"list",name:"ActivityList",component:Pt,meta:{title:"活动列表",icon:"s-grid"}},{path:"add",name:"ActivityAdd",component:Jt,meta:{title:"新增活动",icon:"circle-plus"}}]},{path:"/message",name:"Message",component:se,meta:{title:"留言",icon:"s-comment"},children:[{path:"list",name:"MessageList",component:sa,meta:{title:"留言列表",icon:"s-grid"}}]}],ga=[].concat(ha,[{path:"/login",name:"Login",component:G},{path:"/",redirect:"/club/list"},{path:"*",redirect:"/club/list"}]),ba=new f["a"]({mode:"history",base:"/xzdj-b/",routes:ga});ba.beforeEach((function(e,t,a){if("/login"!==e.path){if(pa.state.user||"/login"==t.path&&"/club"==e.path)return pa.dispatch("menuRoutesChange",ha),a();a("/login")}return a()}));var va=ba,ya=a("5c96"),wa=a.n(ya);a("0fae");r["default"].use(wa.a);a("96b1");r["default"].config.productionTip=!1,new r["default"]({router:va,store:pa,render:function(e){return e(d)}}).$mount("#app")},6054:function(e,t,a){},"65bc":function(e,t,a){"use strict";a("8a9f")},"69fc":function(e,t,a){"use strict";a("a57c")},"6a75":function(e,t,a){"use strict";a("6054")},"6cdc":function(e,t,a){"use strict";a("3caa")},"72bb":function(e,t,a){"use strict";a("f5b6")},7473:function(e,t,a){},"7a14":function(e,t,a){},"85ec":function(e,t,a){},"867e":function(e,t,a){"use strict";a("9aca")},8815:function(e,t,a){},"8a9f":function(e,t,a){},"8d4c":function(e,t,a){},"8efd":function(e,t,a){"use strict";a("3848")},"96b1":function(e,t,a){},"9aca":function(e,t,a){},a57c:function(e,t,a){},abb5:function(e,t,a){},ac7e:function(e,t,a){},b2a8:function(e,t,a){"use strict";a("45c1")},b6b2:function(e,t,a){"use strict";a("c881")},c164:function(e,t,a){"use strict";a("edbf")},c677:function(e,t,a){"use strict";a("2508")},c881:function(e,t,a){},d965:function(e,t,a){"use strict";a("514d")},dbb7:function(e,t,a){"use strict";a("7a14")},e97b:function(e,t,a){"use strict";a("493d")},edbf:function(e,t,a){},ee86:function(e,t,a){},f144:function(e,t,a){},f5b6:function(e,t,a){},ff69:function(e,t,a){"use strict";a("8815")}});
//# sourceMappingURL=app.40bf7d23.js.map